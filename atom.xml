<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hexo</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-12-25T09:55:43.935Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>arderbud</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>CATransaction</title>
    <link href="http://yoursite.com/2019/12/25/CATransaction/"/>
    <id>http://yoursite.com/2019/12/25/CATransaction/</id>
    <published>2019-12-25T09:55:43.935Z</published>
    <updated>2019-12-25T09:55:43.935Z</updated>
    
    <content type="html"><![CDATA[<h2 id="CATransaction"><a href="#CATransaction" class="headerlink" title="CATransaction"></a>CATransaction</h2><h4 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h4><ul><li><code>CATransaction</code>is unique in thread.</li><li>Implicit transaction is only uesd when there is no  active transaction while change the layer tree.</li><li><code>CATransaction</code>capture layer tree changes  just  by mark the root layer.</li></ul><h4 id="Topics"><a href="#Topics" class="headerlink" title="Topics"></a>Topics</h4><ul><li><code>+[CATransaction begin]</code>    just add 1 in specific var.</li><li>Change layer tree. </li><li><code>+[CATransaction commit]</code> sub 1 in specific var. if var is 0, then commit actally. Ensure nested transaction are commited completely.</li></ul><h4 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h4><p>Change the layer follows 3 step.</p><ol><li><p>CA::Layer::begin_change(CA::Transaction*,unsigned int,objc_object*&amp;)</p><ul><li>call <code>CA::Transaction::ensure_implicit()</code> make sure that add an implicit transaction if there is no active transaction.</li><li>call <code>-[CALayer actionForkKey:]</code>,find the CAAnimation correspond with the property. Store it to objc_object*&amp;.</li></ul></li><li><p>Change property.</p></li><li><p>CA::Layer::end_change(CA::Transaction<em>,unsigned int,,objc_object\</em>&amp;),</p><ul><li><p>call <code>CA::Transaction::add_root()</code> mark the root layer of  the updated layer tree</p></li><li><p>call <code>CA::Layer::add_animation()</code> set CATransaction values to the animation(like duration,timingFunction.just guess.)</p></li></ul></li></ol><p>   ​       </p><p>​    </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;CATransaction&quot;&gt;&lt;a href=&quot;#CATransaction&quot; class=&quot;headerlink&quot; title=&quot;CATransaction&quot;&gt;&lt;/a&gt;CATransaction&lt;/h2&gt;&lt;h4 id=&quot;Overview&quot;&gt;&lt;a href=&quot;#O
      
    
    </summary>
    
    
    
  </entry>
  
</feed>
